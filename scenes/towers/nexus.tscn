[gd_scene load_steps=24 format=3 uid="uid://b44iuk7ixyl1q"]

[ext_resource type="PackedScene" uid="uid://bg8dos7yx10dx" path="res://scenes/towers/tower.tscn" id="1_6ebjq"]
[ext_resource type="Script" path="res://scripts/main/nexus.gd" id="2_5ysae"]
[ext_resource type="Script" path="res://scripts/resources/tower_upgrade_tree.gd" id="2_gu4fx"]
[ext_resource type="PackedScene" uid="uid://6tencmd50bh2" path="res://components/projectiles/laser_projectile.tscn" id="3_l03vj"]
[ext_resource type="Script" path="res://scripts/resources/upgrade.gd" id="3_mkfxr"]
[ext_resource type="Script" path="res://scripts/resources/upgrade_command.gd" id="4_fby6b"]

[sub_resource type="Resource" id="Resource_6iduf"]
script = ExtResource("4_fby6b")
upgrade_type = 0
upgrade_value = "5"

[sub_resource type="Resource" id="Resource_rxd5c"]
script = ExtResource("4_fby6b")
upgrade_type = 0
upgrade_value = ""

[sub_resource type="Resource" id="Resource_2ytgt"]
script = ExtResource("3_mkfxr")
upgrade_title = "UPGRADE_TITLE"
upgrade_description = "UPGRADE_TITLE_DESCRIPTION"
upgrade_cost = 75
upgrade_commands = Array[ExtResource("4_fby6b")]([SubResource("Resource_6iduf"), SubResource("Resource_rxd5c")])

[sub_resource type="Resource" id="Resource_5wwqu"]
script = ExtResource("4_fby6b")
upgrade_type = 1
upgrade_value = "2"

[sub_resource type="Resource" id="Resource_qpcvs"]
script = ExtResource("4_fby6b")
upgrade_type = 6
upgrade_value = "1.2"

[sub_resource type="Resource" id="Resource_i6ccn"]
script = ExtResource("4_fby6b")
upgrade_type = 8
upgrade_value = "2"

[sub_resource type="Resource" id="Resource_jg6d7"]
script = ExtResource("4_fby6b")
upgrade_type = 7
upgrade_value = "1.2"

[sub_resource type="Resource" id="Resource_4whvn"]
script = ExtResource("3_mkfxr")
upgrade_title = "UPGRADE_TITLE"
upgrade_description = "UPGRADE_TITLE_DESCRIPTION"
upgrade_cost = 155
upgrade_commands = Array[ExtResource("4_fby6b")]([SubResource("Resource_5wwqu"), SubResource("Resource_qpcvs"), SubResource("Resource_i6ccn"), SubResource("Resource_jg6d7")])

[sub_resource type="Resource" id="Resource_ou1bg"]
script = ExtResource("4_fby6b")
upgrade_type = 3
upgrade_value = "2"

[sub_resource type="Resource" id="Resource_qa0eg"]
script = ExtResource("4_fby6b")
upgrade_type = 6
upgrade_value = "1.5"

[sub_resource type="Resource" id="Resource_0cwvg"]
script = ExtResource("3_mkfxr")
upgrade_title = "UPGRADE_TITLE"
upgrade_description = "UPGRADE_TITLE_DESCRIPTION"
upgrade_cost = 460
upgrade_commands = Array[ExtResource("4_fby6b")]([SubResource("Resource_ou1bg"), SubResource("Resource_qa0eg")])

[sub_resource type="Resource" id="Resource_eyaot"]
script = ExtResource("4_fby6b")
upgrade_type = 6
upgrade_value = "1.75"

[sub_resource type="Resource" id="Resource_o4rpp"]
script = ExtResource("4_fby6b")
upgrade_type = 4
upgrade_value = "5"

[sub_resource type="Resource" id="Resource_8fwva"]
script = ExtResource("3_mkfxr")
upgrade_title = "UPGRADE_TITLE"
upgrade_description = "UPGRADE_TITLE_DESCRIPTION"
upgrade_cost = 950
upgrade_commands = Array[ExtResource("4_fby6b")]([SubResource("Resource_eyaot"), SubResource("Resource_o4rpp")])

[sub_resource type="Resource" id="Resource_d8gh4"]
script = ExtResource("3_mkfxr")
upgrade_title = "ULTIMATE_STOCK"
upgrade_description = "ULTIMATE_STOCK_DESCRIPTION"
upgrade_cost = 5000
upgrade_commands = Array[ExtResource("4_fby6b")]([])

[sub_resource type="Resource" id="Resource_loc58"]
resource_local_to_scene = true
script = ExtResource("2_gu4fx")
upgrades = Array[ExtResource("3_mkfxr")]([SubResource("Resource_2ytgt"), SubResource("Resource_4whvn"), SubResource("Resource_0cwvg"), SubResource("Resource_8fwva"), SubResource("Resource_d8gh4")])

[sub_resource type="SpriteFrames" id="SpriteFrames_6j6m2"]

[node name="Nexus" groups=["nexus"] instance=ExtResource("1_6ebjq")]
script = ExtResource("2_5ysae")
default_tower_cost = 0
default_projectile = ExtResource("3_l03vj")
default_light_range = 2.5
default_tower_range = 1.5
default_damage = 25
default_firing_cooldown = 4.0
tower_name = "Nexus"

[node name="TowerUpgrades" parent="." index="0"]
upgrade_tree_1 = SubResource("Resource_loc58")
upgrade_tree_2 = SubResource("Resource_loc58")
upgrade_tree_3 = SubResource("Resource_loc58")

[node name="TowerGunSprite" parent="." index="3"]
sprite_frames = SubResource("SpriteFrames_6j6m2")
animation = &"default"
frame = 0
frame_progress = 0.0

[node name="Pupil" parent="TowerGunSprite" index="0"]
visible = false

[node name="TowerGunMuzzle" parent="TowerGunSprite" index="1"]
position = Vector2(0, 0)

[connection signal="enemy_detected" from="StateMachine/Seeking" to="." method="_on_seeking_enemy_detected"]
